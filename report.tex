\documentclass[12pt, a4paper]{third-rep}

\usepackage{url}
\usepackage{listings}

% colours
\usepackage{xcolor}
\definecolor{mydarkblue}{rgb}{0,0.08,0.45}
\definecolor{mintbg}{rgb}{0.95,0.95,0.95}
\definecolor{listingframe}{rgb}{1,0.31,0}

% tcolorbox my beloved
\usepackage[most]{tcolorbox}
\tcbuselibrary{minted,breakable,skins,raster}
\newtcbinputlisting[auto counter]{\pythoncode}[3][]{
  enhanced jigsaw,breakable,
  boxrule=0.2mm,top=1mm,bottom=1mm,left=1mm,right=1mm,
  before=\par\smallskip,after=\par\smallskip,
  listing file={#3},
  listing only,
  listing engine=minted,
  listing options={basicstyle=\footnotesize\listingsfont},
  minted language=python,
  minted style=colorful,
  colback=mintbg,
  colframe=listingframe,
  fonttitle=\bfseries,
  title={Listing \thetcbcounter: #2},
  #1
}

% minted replaces listings
\usepackage{minted}
\usepackage{dingbat}
\setminted[python]{
    breaklines,
    breakanywhere,
    autogobble,
    samepage=false,
}

% hyperlink setup
\usepackage{hyperref}
\hypersetup{
    pdftitle={},
    pdfsubject={},
    pdfkeywords={},
    pdfborder=0 0 0,
    pdfpagemode=UseNone,
    colorlinks=true,
    linkcolor=mydarkblue,
    citecolor=mydarkblue,
    filecolor=mydarkblue,
    urlcolor=mydarkblue,
}

%% Uncomment the following lines if you want to include the date as a
%% header in draft versions. See the documentation for fancyhdr for
%% more ways of modifying headers (texdoc fancyhdr will show you the
%% docs) 

% \usepackage{fancyhdr}
% \pagestyle{fancy}
% \lhead{}  % left head
% \chead{Draft: \today} % centre head
% \lfoot{}
% \cfoot{\thepage}
% \rfoot{}

% title stuff
\usepackage{titlesec}
\newcommand{\PreContentTitleFormat}{\titleformat{\chapter}[display]{\scshape\Large}
{\Large\filleft\MakeUppercase{\chaptertitlename} \Huge\thechapter}
{1ex}
{}
[\vspace{1ex}\titlerule]}

\newcommand{\ContentTitleFormat}{\titleformat{\chapter}[display]{\scshape\huge}
{\Large\filleft\MakeUppercase{\chaptertitlename} \Huge\thechapter}
{1ex}
{\titlerule\vspace{1ex}\filright}
[\vspace{1ex}\titlerule]}

% glossary stuff
\usepackage[toc]{glossaries}
\setacronymstyle{long-short}
\makenoidxglossaries{}
\loadglsentries{glossary}

% only work on a chapter at a time to improve compile times
%\includeonly{appendix1}

\title{Exploring Password-Authenticated Key-Exchange Algorithms}
\author{Sam Leonard}
\supervisor{Professor Bernardo Magri}
\reportyear{2023}
\studentid{f41751sl}

\abstractfile{abstract.tex}
\thanksfile{merci.tex}

\begin{document}

\dotitleandabstract

%% Generate contents etc
\tableofcontents

%% These include the actual text
\include{chapter1}
\include{chapter2}
\include{chapter3}
\include{chapter4}
\include{chapter5}

% print the glossary
\printnoidxglossaries{}

% this causes the references to be listed
% \bibliography{refs}             

% this determines the style in which
% the references are printed, other
% possible values are plain and abbrv
\bibliographystyle{alpha}       
\nocite{*}
\bibliography{refs}
                                
%% Appendices start here
\appendix
\include{appendix1}
\include{appendix2}

\end{document}
